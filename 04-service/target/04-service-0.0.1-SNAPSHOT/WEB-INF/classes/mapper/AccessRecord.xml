<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.itStudyService.dao.Access_recordDao">


    <select id="showTimeSort" resultType="hashmap">
        SELECT `time`,COUNT(*) AS `count`,isLogin FROM
        (
            SELECT
                DATE_FORMAT(
                    CONCAT(
                        DATE(timeCreate),
                        ' ',
                        FLOOR(HOUR(timeCreate) / 2) * 2
                    ),
                    '%Y-%m-%d %H:%00:00'
                ) AS `time`, isLogin
            FROM
                access_record
        ) a
        GROUP BY DATE_FORMAT(`time`, '%Y-%m-%d %H:%00:00')
        ORDER BY DATE_FORMAT(`TIME`, '%Y-%m-%d %H:%00:00') DESC
        LIMIT 0,24
    </select>




</mapper>